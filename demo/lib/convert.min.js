!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.convert=t():r.convert=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=r,t.c=e,t.p="",t(0)}([function(r,t,e){"use strict";var n=e(1),o=e(4);r.exports=function(r,t){for(var e=[],s=r,a=1;s instanceof Array;)e.push(s.length),a*=s.length,s=s[0];return 0===e.length?n():(t||(t=n(new Float64Array(a),e)),o(t,r),t)}},function(r,t,e){function n(r,t){return r[0]-t[0]}function o(){var r,t=this.stride,e=new Array(t.length);for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(n);var o=new Array(e.length);for(r=0;r<o.length;++r)o[r]=e[r][1];return o}function s(r,t){var e=["View",t,"d",r].join("");0>t&&(e="View_Nil"+r);var n="generic"===r;if(-1===t){var s="function "+e+"(a){this.data=a;};	var proto="+e+".prototype;	proto.dtype='"+r+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+e+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+e+"(a){return new "+e+"(a);}",a=new Function(s);return a()}if(0===t){var s="function "+e+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+e+".prototype;	proto.dtype='"+r+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+e+"_copy() {	return new "+e+"(this.data,this.offset)	};	proto.pick=function "+e+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+e+"_get(){	return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+e+"_set(v){	return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}",a=new Function("TrivialArray",s);return a(c[r][0])}var s=["'use strict'"],i=u(t),p=i.map(function(r){return"i"+r}),h="this.offset+"+i.map(function(r){return"this.stride["+r+"]*i"+r}).join("+"),f=i.map(function(r){return"b"+r}).join(","),l=i.map(function(r){return"c"+r}).join(",");s.push("function "+e+"(a,"+f+","+l+",d){this.data=a","this.shape=["+f+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+r+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){	return "+i.map(function(r){return"this.shape["+r+"]"}).join("*"),"}})"),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),4>t?(s.push("function "+e+"_order(){"),2===t?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):s.push("ORDER})")),s.push("proto.set=function "+e+"_set("+p.join(",")+",v){"),n?s.push("return this.data.set("+h+",v)}"):s.push("return this.data["+h+"]=v}"),s.push("proto.get=function "+e+"_get("+p.join(",")+"){"),n?s.push("return this.data.get("+h+")}"):s.push("return this.data["+h+"]}"),s.push("proto.index=function "+e+"_index(",p.join(),"){return "+h+"}"),s.push("proto.hi=function "+e+"_hi("+p.join(",")+"){return new "+e+"(this.data,"+i.map(function(r){return["(typeof i",r,"!=='number'||i",r,"<0)?this.shape[",r,"]:i",r,"|0"].join("")}).join(",")+","+i.map(function(r){return"this.stride["+r+"]"}).join(",")+",this.offset)}");var g=i.map(function(r){return"a"+r+"=this.shape["+r+"]"}),d=i.map(function(r){return"c"+r+"=this.stride["+r+"]"});s.push("proto.lo=function "+e+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+d.join(","));for(var y=0;t>y;++y)s.push("if(typeof i"+y+"==='number'&&i"+y+">=0){	d=i"+y+"|0;	b+=c"+y+"*d;	a"+y+"-=d}");s.push("return new "+e+"(this.data,"+i.map(function(r){return"a"+r}).join(",")+","+i.map(function(r){return"c"+r}).join(",")+",b)}"),s.push("proto.step=function "+e+"_step("+p.join(",")+"){var "+i.map(function(r){return"a"+r+"=this.shape["+r+"]"}).join(",")+","+i.map(function(r){return"b"+r+"=this.stride["+r+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;t>y;++y)s.push("if(typeof i"+y+"==='number'){	d=i"+y+"|0;	if(d<0){	c+=b"+y+"*(a"+y+"-1);	a"+y+"=ceil(-a"+y+"/d)	}else{	a"+y+"=ceil(a"+y+"/d)	}	b"+y+"*=d	}");s.push("return new "+e+"(this.data,"+i.map(function(r){return"a"+r}).join(",")+","+i.map(function(r){return"b"+r}).join(",")+",c)}");for(var v=new Array(t),j=new Array(t),y=0;t>y;++y)v[y]="a[i"+y+"]",j[y]="b[i"+y+"]";s.push("proto.transpose=function "+e+"_transpose("+p+"){"+p.map(function(r,t){return r+"=("+r+"===undefined?"+t+":"+r+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+v.join(",")+","+j.join(",")+",this.offset)}"),s.push("proto.pick=function "+e+"_pick("+p+"){var a=[],b=[],c=this.offset");for(var y=0;t>y;++y)s.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+i.map(function(r){return"shape["+r+"]"}).join(",")+","+i.map(function(r){return"stride["+r+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",s.join("\n"));return a(c[r],o)}function a(r){if(p(r))return"buffer";if(h)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(r)?"array":"generic"}function i(r,t,e,n){if(void 0===r){var o=c.array[0];return o([])}"number"==typeof r&&(r=[r]),void 0===t&&(t=[r.length]);var i=t.length;if(void 0===e){e=new Array(i);for(var u=i-1,p=1;u>=0;--u)e[u]=p,p*=t[u]}if(void 0===n){n=0;for(var u=0;i>u;++u)e[u]<0&&(n-=(t[u]-1)*e[u])}for(var h=a(r),f=c[h];f.length<=i+1;)f.push(s(h,f.length-1));var o=f[i+1];return o(r,t,e,n)}var u=e(2),p=e(3),h="undefined"!=typeof Float64Array,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};r.exports=i},function(r,t){"use strict";function e(r){for(var t=new Array(r),e=0;r>e;++e)t[e]=e;return t}r.exports=e},function(r,t){r.exports=function(r){return!(null==r||!(r._isBuffer||r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)))}},function(r,t,e){"use strict";r.exports=e(5)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\r\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\r\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\r\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\r\n}\r\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\r\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},function(r,t,e){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function o(r){var t=new n;t.pre=r.pre,t.body=r.body,t.post=r.post;var e=r.args.slice(0);t.argTypes=e;for(var o=0;o<e.length;++o){var a=e[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+e[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>e.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>e.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>e.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!r.printCode||!!r.debug,t.funcName=r.funcName||"cwise",t.blockSize=r.blockSize||64,s(t)}var s=e(6);r.exports=o},function(r,t,e){"use strict";function n(r){var t=["'use strict'","var CACHED={}"],e=[],n=r.funcName+"_cwise_thunk";t.push(["return function ",n,"(",r.shimArgs.join(","),"){"].join(""));for(var s=[],a=[],i=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],u=[],p=[],h=0;h<r.arrayArgs.length;++h){var c=r.arrayArgs[h];e.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),s.push("t"+c),s.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),i.push("array"+c+".data"),i.push("array"+c+".stride"),i.push("array"+c+".offset|0"),h>0&&(u.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[h]))),p.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[h])+"]"))}r.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var h=0;h<r.scalarArgs.length;++h)i.push("scalar"+r.scalarArgs[h]);e.push(["type=[",a.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),t.push("var "+e.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",i.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var f=new Function("compile",t.join("\n"));return f(o.bind(void 0,r))}var o=e(7);r.exports=n},function(r,t,e){"use strict";function n(r,t,e){var n,o,s=r.length,a=t.arrayArgs.length,i=t.indexArgs.length>0,u=[],p=[],h=0,c=0;for(n=0;s>n;++n)p.push(["i",n,"=0"].join(""));for(o=0;a>o;++o)for(n=0;s>n;++n)c=h,h=r[n],0===n?p.push(["d",o,"s",n,"=t",o,"p",h].join("")):p.push(["d",o,"s",n,"=(t",o,"p",h,"-s",c,"*t",o,"p",c,")"].join(""));for(u.push("var "+p.join(",")),n=s-1;n>=0;--n)h=r[n],u.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));for(u.push(e),n=0;s>n;++n){for(c=h,h=r[n],o=0;a>o;++o)u.push(["p",o,"+=d",o,"s",n].join(""));i&&(n>0&&u.push(["index[",c,"]-=s",c].join("")),u.push(["++index[",h,"]"].join(""))),u.push("}")}return u.join("\n")}function o(r,t,e,o){for(var s=t.length,a=e.arrayArgs.length,i=e.blockSize,u=e.indexArgs.length>0,p=[],h=0;a>h;++h)p.push(["var offset",h,"=p",h].join(""));for(var h=r;s>h;++h)p.push(["for(var j"+h+"=SS[",t[h],"]|0;j",h,">0;){"].join("")),p.push(["if(j",h,"<",i,"){"].join("")),p.push(["s",t[h],"=j",h].join("")),p.push(["j",h,"=0"].join("")),p.push(["}else{s",t[h],"=",i].join("")),p.push(["j",h,"-=",i,"}"].join("")),u&&p.push(["index[",t[h],"]=j",h].join(""));for(var h=0;a>h;++h){for(var c=["offset"+h],f=r;s>f;++f)c.push(["j",f,"*t",h,"p",t[f]].join(""));p.push(["p",h,"=(",c.join("+"),")"].join(""))}p.push(n(t,e,o));for(var h=r;s>h;++h)p.push("}");return p.join("\n")}function s(r){for(var t=0,e=r[0].length;e>t;){for(var n=1;n<r.length;++n)if(r[n][t]!==r[0][t])return t;++t}return t}function a(r,t,e){for(var n=r.body,o=[],s=[],a=0;a<r.args.length;++a){var i=r.args[a];if(!(i.count<=0)){var u=new RegExp(i.name,"g"),p="",h=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var c=t.offsetArgIndex.indexOf(a),f=t.offsetArgs[c];h=f.array,p="+q"+c;case"array":p="p"+h+p;var l="l"+a,g="a"+h;if(0===t.arrayBlockIndices[h])1===i.count?"generic"===e[h]?i.lvalue?(o.push(["var ",l,"=",g,".get(",p,")"].join("")),n=n.replace(u,l),s.push([g,".set(",p,",",l,")"].join(""))):n=n.replace(u,[g,".get(",p,")"].join("")):n=n.replace(u,[g,"[",p,"]"].join("")):"generic"===e[h]?(o.push(["var ",l,"=",g,".get(",p,")"].join("")),n=n.replace(u,l),i.lvalue&&s.push([g,".set(",p,",",l,")"].join(""))):(o.push(["var ",l,"=",g,"[",p,"]"].join("")),n=n.replace(u,l),i.lvalue&&s.push([g,"[",p,"]=",l].join("")));else{for(var d=[i.name],y=[p],v=0;v<Math.abs(t.arrayBlockIndices[h]);v++)d.push("\\s*\\[([^\\]]+)\\]"),y.push("$"+(v+1)+"*t"+h+"b"+v);if(u=new RegExp(d.join(""),"g"),p=y.join("+"),"generic"===e[h])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[g,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[o.join("\n"),n,s.join("\n")].join("\n").trim()}function i(r){for(var t=new Array(r.length),e=!0,n=0;n<r.length;++n){var o=r[n],s=o.match(/\d+/);s=s?s[0]:"",0===o.charAt(0)?t[n]="u"+o.charAt(1)+s:t[n]=o.charAt(0)+s,n>0&&(e=e&&t[n]===t[n-1])}return e?t[0]:t.join("")}function u(r,t){for(var e=t[1].length-Math.abs(r.arrayBlockIndices[0])|0,u=new Array(r.arrayArgs.length),h=new Array(r.arrayArgs.length),c=0;c<r.arrayArgs.length;++c)h[c]=t[2*c],u[c]=t[2*c+1];for(var f=[],l=[],g=[],d=[],y=[],c=0;c<r.arrayArgs.length;++c){r.arrayBlockIndices[c]<0?(g.push(0),d.push(e),f.push(e),l.push(e+r.arrayBlockIndices[c])):(g.push(r.arrayBlockIndices[c]),d.push(r.arrayBlockIndices[c]+e),f.push(0),l.push(r.arrayBlockIndices[c]));for(var v=[],j=0;j<u[c].length;j++)g[c]<=u[c][j]&&u[c][j]<d[c]&&v.push(u[c][j]-g[c]);y.push(v)}for(var b=["SS"],_=["'use strict'"],w=[],j=0;e>j;++j)w.push(["s",j,"=SS[",j,"]"].join(""));for(var c=0;c<r.arrayArgs.length;++c){b.push("a"+c),b.push("t"+c),b.push("p"+c);for(var j=0;e>j;++j)w.push(["t",c,"p",j,"=t",c,"[",g[c]+j,"]"].join(""));for(var j=0;j<Math.abs(r.arrayBlockIndices[c]);++j)w.push(["t",c,"b",j,"=t",c,"[",f[c]+j,"]"].join(""))}for(var c=0;c<r.scalarArgs.length;++c)b.push("Y"+c);if(r.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var A=new Array(e),c=0;e>c;++c)A[c]="0";w.push(["index=[",A.join(","),"]"].join(""))}for(var c=0;c<r.offsetArgs.length;++c){for(var m=r.offsetArgs[c],x=[],j=0;j<m.offset.length;++j)0!==m.offset[j]&&(1===m.offset[j]?x.push(["t",m.array,"p",j].join("")):x.push([m.offset[j],"*t",m.array,"p",j].join("")));0===x.length?w.push("q"+c+"=0"):w.push(["q",c,"=",x.join("+")].join(""))}var k=p([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));w=w.concat(k),_.push("var "+w.join(","));for(var c=0;c<r.arrayArgs.length;++c)_.push("p"+c+"|=0");r.pre.body.length>3&&_.push(a(r.pre,r,h));var I=a(r.body,r,h),E=s(y);e>E?_.push(o(E,y[0],r,I)):_.push(n(y[0],r,I)),r.post.body.length>3&&_.push(a(r.post,r,h)),r.debug&&console.log("-----Generated cwise routine for ",t,":\n"+_.join("\n")+"\n----------");var B=[r.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",E,i(h)].join(""),M=new Function(["function ",B,"(",b.join(","),"){",_.join("\n"),"} return ",B].join(""));return M()}var p=e(8);r.exports=u},function(r,t){"use strict";function e(r,t){for(var e=1,n=r.length,o=r[0],s=r[0],a=1;n>a;++a)if(s=o,o=r[a],t(o,s)){if(a===e){e++;continue}r[e++]=o}return r.length=e,r}function n(r){for(var t=1,e=r.length,n=r[0],o=r[0],s=1;e>s;++s,o=n)if(o=n,n=r[s],n!==o){if(s===t){t++;continue}r[t++]=n}return r.length=t,r}function o(r,t,o){return 0===r.length?r:t?(o||r.sort(t),e(r,t)):(o||r.sort(),n(r))}r.exports=o}])});
//# sourceMappingURL=convert.min.js.map
